# 微乐捕鱼

### 新鱼开发完整流程

<!--以通天魔牛457为例-->

###### 一. 鱼完整资源结构



![鱼资源结构](C:\Users\电脑\Desktop\微乐捕鱼\新鱼开发\鱼资源结构.png)

1. 根目录:Fish457

2. Animations : 存放当前鱼的所有动作资源(包含Timeline和Animator)

   * FX_100050422_Timeline.playable : 
     * 增加Attack Event Track 并调整到合适位置用于触发FunctionFishBase.OnAttackEvent做攻击表现
     * 可选增加Custom Event Track 用于触发FunctionFishBase.OnPlayableDirectorEvent

3. FX : 存放美术资源

4. Materials : 鱼材质球

5. Models : 鱼3D材质模型

   * fish_100050422 : 材质选项 Material Creation Mode 选择 None

6. Prefabs : 鱼预制体

   * Fish457 : 局内游走的预制体
     * 添加XFishInfo脚本,并调整鱼的旋转量
     * 新建LockBones用于攻击锁定
     * 添加Capsule Collider用于玩家点击检测
     * 调整模型头部朝向Y轴的正方向并且肚子朝向Z轴的正方向

   * Skill :  捕获后播放的预制体
     * 检查Timeline是否正常引用并取消勾选Play On Awake
     * 添加XTimelineBridge脚本并在Root处引用Timeline节点

7. Textures : 材质贴图

   * Base贴图保持美术格式

   * PBR贴图压缩其贴图大小到512

   * 法线贴图取消勾选sRGB

8. UI : 程序创建,用于放置局内UI表现资源 


###### 二. 相关脚本

1. FunctionFishBase.cs : 

   功能鱼基类，所有功能鱼击杀后触发的脚本均继承自此类。  

2. TongTianMoNiu.cs :  

   通天魔牛捕获触发脚本，继承自FunctionFishBase。

   * Play()

     播放鱼击杀后表现

   * OnAttackEvent()

     由Timeline 中 Attack Event Track触发，通常做鱼技能的发射

   * OnTrigger()

     功能鱼触发事件，通常作为"脚本入口"

   * OnHit()

   * OnResult()

   * OnFunctionFishReconnect()

   * PlayDeadBomb()

   * PlayBombEffect()

   * DeadShake()

   * PlayOver()
